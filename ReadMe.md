# Node.js パフォーマンステスト

## 目的

パソコンの性能によって、フロントエンド開発におけるツールの実行時間に影響があるか調べることです。

## 計測の対象

以下の4つの観点で時間を計測します。

- **JSビルド・バンドル時間** : React v16.13を利用したTypeScriptプロジェクト
- **CSSビルド時間** : Boostrap v4.5を利用したScssのプロジェクト
- **JAMstack** : Nuxt v2.14を利用したフルスタティックサイト向けのジェネレート時間
- **コード整形時間** : eslintとprettierとstylelintを利用

計測の内部ロジックは以下の通りとなっています。

- コマンドを開始し終了するまでの実行時間（ミリ秒）を記録
- 5回試行し、はじめの1回目をのぞく4回の実行時間（ミリ秒）を記録

## 方法

事前に以下をインストールください。

- Node.js (LTSのv12を推奨)
- Yarn

例
```
yarn -v : 1.22.4
node -v : v12.18.3
```

本ディレクトリーにおいて、`yarn install` コマンドでモジュールをインストールします。Yarnのワークスペース機能を利用しているため、配下ディレクトリーもふくめてモジュールがまとめてインストールされます。

```
yarn install
```

次に、計測のためのコマンドを実行します。

```
yarn run start
```

すると、ベンチマークが開始します。しばらく時間がかかるのでお待ちください。

計測が完了すると、以下のようなログが出力されます。

```
✅️ On your machine, the result is as follows:

{
  platform: {
    cpu: 'Intel(R) Core(TM) i7-7567U CPU @ 3.50GHz',
    coreNum: 4,
    totalMemory: 17179869184,
    nodeVersion: 'v12.18.3',
    os: 'darwin, 19.6.0'
  },
  result: {
    typescript: [ 5410, 6674, 6038, 7426 ],
    scss: [ 7617, 9007, 7078, 10816 ],
    nuxtGenerate: [ 25392, 18701, 20234, 18178 ],
    lint: [ 5515, 3748, 6502, 3983 ]
  }
}
```

## 計測時の注意点

- 計測に重要なのは、外的要因を少なくすることです
- 可能な限り、他のアプリケーションを終了した状態で実行ください
- ノートパソコンでは電源をつないで実行ください
- マシンの冷却ができた状態で実行ください
- 仮想環境で利用の場合は、結果報告時にその旨の共有をお願いします
